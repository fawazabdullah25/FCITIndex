<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FCITIndex</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png" href="icons/favicon.png">
</head>

<body>
    <div id="splash-screen">
        <img src="icons/logo.png" alt="FCITIndex Logo" class="splash-logo">
    </div>

    <header class="site-header">
        <button id="logoBtn" class="logo-section" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
            <img src="icons/favicon.png" alt="FCITIndex" class="header-logo default-logo">
            <img src="icons/logo.png" alt="FCITIndex" class="header-logo mobile-logo">
            <div class="logo-text-container">
                <span class="logo">FCITINDEX</span>
                <span class="logo-tagline">Build Your Own Schedule</span>
            </div>
        </button>

        <div class="header-actions">
            <button id="settingsBtn" class="settings-toggle" title="Settings">
                <img src="icons/settings.png" alt="" class="settings-icon">
            </button>
            <button id="themeToggle" class="theme-toggle" title="Toggle Light/Dark Mode">
                <img src="icons/moon.png" alt="" class="theme-icon">
            </button>
        </div>
    </header>

    <div id="schedule" style="display: none;">
        <!-- Header Controls (Credits Only) -->
        <div id="scheduleHeader" class="schedule-header"
            style="display: flex; justify-content: flex-end; align-items: center; margin-bottom: 10px; padding: 0 5px;">
            <!-- Duplicate h2 removed -->
            <div class="total-credits-badge"
                style="background: var(--bg-card); padding: 5px 10px; border-radius: 6px; border: 1px solid var(--border-color); font-size: 0.9rem; font-weight: 600; color: var(--accent-primary); ">
                <span id="totalCreditsCount">0</span> Credits
            </div>
        </div>
        <div id="timetableContainer"></div>
        <div id="scheduleControls" class="hidden">
            <button id="mobileViewToggle" class="mobile-view-toggle">
                <img src="icons/grid.png" alt=""> Switch to Grid View
            </button>
            <div class="schedule-actions-right" style="display:flex; gap:10px;">
                <button id="clearCoursesBtn" class="clear-btn">CLEAR SCHEDULE</button>
                <button id="changeBlockBtn" class="clear-btn">CHANGE BLOCK</button>
            </div>
        </div>
    </div>

    <section>
        <h3>Add Other Courses</h3>

        <div class="search-container">
            <div class="search-pill">
                <input type="text" id="courseInput" placeholder="Search for any course (e.g., MATH-202)">
                <button id="fetchBtn" title="Search">
                    <img src="icons/search.png" alt="" class="search-icon">
                </button>
            </div>
        </div>

        <div id="suggestions">
            <p>Suggested for your term:</p>
            <div id="suggestedButtons"></div>
        </div>


        <div id="modal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Choose a section for <span></span></h3>
                    <div class="modal-header-buttons">
                        <button id="mobileFilterToggle" class="mobile-filter-toggle" title="Toggle Filters">
                            <img src="icons/filter.png" alt="" class="filter-toggle-icon">
                        </button>
                        <button onclick="closeModal('modal')" class="modal-close-btn" title="Close">
                            <img src="icons/x.png" alt="">
                        </button>
                    </div>
                </div>

                <div class="modal-body-wrapper">
                    <div id="filtersPanel" class="filters-panel">
                        <div class="filter-row-pair">
                            <div class="filter-row">
                                <label for="filterInstructor" class="filter-label">Instructor</label>
                                <input type="text" id="filterInstructor" placeholder="e.g. Ahmed">
                            </div>
                            <div class="filter-row">
                                <label for="filterSection" class="filter-label">Section</label>
                                <input type="text" id="filterSection" placeholder="e.g. AB">
                            </div>
                        </div>
                        <div class="filter-row-pair">
                            <div class="filter-row">
                                <label for="filterCrn" class="filter-label">CRN</label>
                                <input type="text" id="filterCrn" placeholder="e.g. 10881">
                            </div>
                            <div class="filter-row">
                                <label for="filterStartTime" class="filter-label">Start Time</label>
                                <select id="filterStartTime" class="custom-select">
                                    <option value="">Any Time</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter-row">
                            <label class="filter-label" style="width:100%">Days</label>
                            <div class="days-container">
                                <label class="day-chip" data-day="U"><input type="checkbox" name="filterDay" value="U">
                                    Sun</label>
                                <label class="day-chip" data-day="M"><input type="checkbox" name="filterDay" value="M">
                                    Mon</label>
                                <label class="day-chip" data-day="T"><input type="checkbox" name="filterDay" value="T">
                                    Tue</label>
                                <label class="day-chip" data-day="W"><input type="checkbox" name="filterDay" value="W">
                                    Wed</label>
                                <label class="day-chip" data-day="R"><input type="checkbox" name="filterDay" value="R">
                                    Thu</label>
                            </div>
                        </div>
                        <div class="filter-row">
                            <label class="conflict-toggle">
                                <input type="checkbox" id="filterConflict" checked>
                                <span>Hide Conflicting Sections</span>
                            </label>
                        </div>
                    </div>

                    <div class="modal-scroll-container">
                        <div id="sectionList"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="add-custom-container action-buttons-row">
            <button id="openCustomModalBtn" class="action-btn custom-course-btn">
                <img src="icons/add.png" alt="" class="btn-icon"> ADD OTHER COURSE
            </button>
            <button id="openTaskModalBtn" class="action-btn task-btn">
                <img src="icons/add.png" alt="" class="btn-icon"> ADD TASK
            </button>
        </div>
    </section>

    <!-- Custom Course Modal -->
    <!-- Custom Course Modal -->
    <!-- Custom Course Modal (Standardized) -->
    <div id="customCourseModal" class="modal-overlay">
        <div class="modal-content details-modal">
            <div class="modal-header">
                <h3>Add Other Course</h3>
                <button id="closeCustomBtn" class="modal-close-btn">
                    <img src="icons/x.png" alt="">
                </button>
            </div>
            <div class="modal-body filters-panel form-panel-full">
                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Course Code</label>
                        <input type="text" id="customCode" placeholder="e.g. MATH-101">
                    </div>
                    <div class="filter-row">
                        <label class="filter-label">Course Title</label>
                        <input type="text" id="customTitle" placeholder="e.g. Calculus I">
                    </div>
                </div>

                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Section</label>
                        <input type="text" id="customSection" placeholder="e.g. AA">
                    </div>
                    <div class="filter-row">
                        <label class="filter-label">CRN</label>
                        <input type="number" id="customCrn" placeholder="CRN">
                    </div>
                </div>

                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Credits</label>
                        <input type="number" id="customCredits" placeholder="3">
                    </div>
                    <div class="filter-row">
                        <label class="filter-label">Room</label>
                        <input type="text" id="customRoom" placeholder="Room 101">
                    </div>
                </div>

                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Instructor</label>
                        <input type="text" id="customInstructor" placeholder="Name">
                    </div>
                </div>

                <div class="filter-row">
                    <label class="filter-label" style="width:100%">Days</label>
                    <div class="days-container">
                        <label class="day-chip" data-day="U"><input type="checkbox" name="customDay" value="U">
                            Sun</label>
                        <label class="day-chip" data-day="M"><input type="checkbox" name="customDay" value="M">
                            Mon</label>
                        <label class="day-chip" data-day="T"><input type="checkbox" name="customDay" value="T">
                            Tue</label>
                        <label class="day-chip" data-day="W"><input type="checkbox" name="customDay" value="W">
                            Wed</label>
                        <label class="day-chip" data-day="R"><input type="checkbox" name="customDay" value="R">
                            Thu</label>
                    </div>
                </div>

                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Start Time</label>
                        <select id="customStartTime" class="custom-select">
                            <option value="">Select Time</option>
                        </select>
                    </div>
                    <div class="filter-row">
                        <label class="filter-label">End Time</label>
                        <select id="customEndTime" class="custom-select">
                            <option value="">Select Time</option>
                        </select>
                    </div>
                </div>

                <p id="customErrorMsg" class="error-msg"></p>
                <button id="addCustomEntryBtn"
                    style="width: 100%; padding: 12px; background: var(--accent-primary); color: var(--bg-primary); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; text-transform: uppercase; margin-top: 15px;">ADD
                    COURSE</button>
            </div>
        </div>
    </div>

    <div id="detailsModal" class="modal-overlay">
        <div class="modal-content details-modal">
            <div class="modal-header">
                <h3 id="detailsTitle">Course Details</h3>
                <button id="closeDetailsBtn" class="modal-close-btn">
                    <img src="icons/x.png" alt="">
                </button>
            </div>
            <div class="details-body" id="detailsContent">
            </div>
            <div class="details-footer">
                <button id="detailsRemoveBtn" class="btn-danger">Remove Course</button>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal-overlay">
        <div class="modal-content confirm-modal">
            <h3 id="confirmTitle">Confirm Action</h3>
            <p id="confirmMessage"></p>
            <div class="confirm-buttons">
                <button id="confirmNo" class="confirm-no-btn">Cancel</button>
                <button id="confirmYes" class="confirm-yes-btn">Yes</button>
            </div>
        </div>
    </div>


    <!-- Task Modal -->
    <!-- Task Modal (Standardized) -->
    <div id="taskModal" class="modal-overlay">
        <div class="modal-content details-modal">
            <div class="modal-header">
                <h3>Add Task</h3>
                <button id="closeTaskModalBtn" class="modal-close-btn">
                    <img src="icons/x.png" alt="">
                </button>
            </div>
            <div class="modal-body filters-panel form-panel-full">
                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Title</label>
                        <input type="text" id="taskTitle" placeholder="e.g., Study Session">
                    </div>
                </div>
                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Subtitle</label>
                        <input type="text" id="taskSubtitle" placeholder="e.g., Library Room 3">
                    </div>
                </div>

                <div class="filter-row">
                    <label class="filter-label" style="width:100%">Days</label>
                    <div class="days-container">
                        <label class="day-chip" data-day="U"><input type="checkbox" name="taskDay" value="U">
                            Sun</label>
                        <label class="day-chip" data-day="M"><input type="checkbox" name="taskDay" value="M">
                            Mon</label>
                        <label class="day-chip" data-day="T"><input type="checkbox" name="taskDay" value="T">
                            Tue</label>
                        <label class="day-chip" data-day="W"><input type="checkbox" name="taskDay" value="W">
                            Wed</label>
                        <label class="day-chip" data-day="R"><input type="checkbox" name="taskDay" value="R">
                            Thu</label>
                    </div>
                </div>

                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Start Time</label>
                        <input type="time" id="taskStartTime" class="custom-select" style="padding-right: 10px;">
                    </div>
                    <div class="filter-row">
                        <label class="filter-label">End Time</label>
                        <input type="time" id="taskEndTime" class="custom-select" style="padding-right: 10px;">
                    </div>
                </div>

                <div class="filter-row-pair">
                    <div class="filter-row">
                        <label class="filter-label">Description</label>
                        <textarea id="taskDescription" rows="3" placeholder="Notes..."></textarea>
                    </div>
                </div>

                <p id="taskErrorMsg" class="error-msg"></p>
                <button id="addTaskBtn"
                    style="width: 100%; padding: 12px; background: var(--accent-primary); color: var(--bg-primary); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; text-transform: uppercase; margin-top: 15px;">ADD
                    TASK</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal-overlay">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h3>Settings</h3>
                <button id="closeSettingsBtn" class="modal-close-btn">
                    <img src="icons/x.png" alt="">
                </button>
            </div>
            <div class="modal-body">
                <div class="setting-row">
                    <div class="setting-info">
                        <span class="setting-label">Show Ramadan Times</span>
                        <span class="setting-desc">Display expected Ramadan lecture times</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="settingRamadan">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-row">
                    <div class="setting-info">
                        <span class="setting-label">Show CRN in List</span>
                        <span class="setting-desc">Display CRN badge in mobile list view</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="settingCrn" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-row">
                    <div class="setting-info">
                        <span class="setting-label">Show Credits in List</span>
                        <span class="setting-desc">Display credit hours in mobile list view</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="settingCredits" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-row">
                    <div class="setting-info">
                        <span class="setting-label">Show Full Days</span>
                        <span class="setting-desc">Display full day names (e.g. Monday) instead of abbreviations</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="settingFullDays">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>


    <div class="form-logo-block">
        <img src="icons/logo.png" alt="FCIT Index">
        <h1>Build Your FCIT Schedule</h1>
    </div>
    <main>
        <form id="blockForm">
            <div class="field">
                <label for="gender">Gender</label>
                <select id="gender" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
            </div>

            <div class="field">
                <label>Academic Year &amp; Term</label>
                <div class="year-term-combo">
                    <select id="year" required>
                        <option value="">Select Year</option>
                        <option value="2">Year 2</option>
                        <option value="3">Year 3</option>
                        <option value="4">Year 4</option>
                        <option value="5">Year 5</option>
                    </select>
                    <select id="term" required>
                        <option value="">Select Term</option>
                    </select>
                </div>
            </div>

            <div class="field">
                <label for="major">Major</label>
                <select id="major" required>
                    <option value="">Select Major</option>
                    <option value="CS">Computer Science (CS)</option>
                    <option value="IT">Information Technology (IT)</option>
                    <option value="IS">Information Systems (IS)</option>
                </select>
            </div>

            <div class="field">
                <label for="block">Block</label>
                <select id="block" required>
                    <option value="">Select Block</option>
                </select>
            </div>

            <button type="submit">Load Block Schedule</button>
        </form>
    </main>

    <div id="toast" class="toast hidden">
        <span id="toastMessage">Course removed</span>
        <button id="undoBtn">UNDO</button>
    </div>

    <script src="script.js"></script>
</body>

</html>